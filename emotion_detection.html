<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>康軒面試 Gemini情緒分析實作</title>
</head>

<body>

    <p><font size="5" face="標楷體"> 康軒面試 - 情緒辨識實作 </font><br></p>
    <p><font size="3" face="標楷體"> ⦿ 應徵人:林建宏 </font><br></p>
    
    <p><font face="標楷體"> ⦿ 題目:開發一個網頁應用程式，允許使用者輸入文字內容，並即時顯示對該內容的情感分析結果（正面、負面或中性...等，名目您可以自己決定）。 </font></p>
    <p><font face="標楷體"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;服務使用Google Cloud Platforｍ雲端部建，不限制使用VM、容器、或無伺服器架構達成，但必須串接Gemini API的回訊功能。 </font></p>
    
    <img src="gemini.png" />
    
    <p><font face="標楷體"> ⦿ 請在下方輸入你所想要辨識的文字情緒。 </font></p>
    <input type="text" id="textbox" placeholder="輸入問題">
    <button onclick="sendRequest()">送出</button>
    
    <p><font face="標楷體"> ⦿ gemini 的回答：</font></p>
    
    <div id="response"></div>

    <script>
        async function sendRequest() {
            const userInput = document.getElementById('textbox').value;
            const apiKey = 'AIzaSyBayOIKthXyYvAupFXBfVMl0WgkV3c8F50';
            const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

            const promptText = "1.請你推測並回答目前這段文字當中的情緒，例如:生氣、傷心、難過...等等\
                                2.我不需要你的任何解釋，我只要答案而已\
                                3.請用1,2,3,4...來回答我的問題，並最少給我2到3個答案";

            const requestBody = {
                "contents": [{
                    "parts": [{
                        "text": `${promptText} ${userInput}`
                    }]
                }]
            };

            try {
                const response = await fetch(url, {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify(requestBody)
                });
                const data = await response.json();

                document.getElementById("response").innerText = data.candidates[0].content.parts[0].text;
            } catch (error) {
                document.getElementById("response").innerText = "發生錯誤: " + error;
            }
        }
    </script>
</body>
</html>